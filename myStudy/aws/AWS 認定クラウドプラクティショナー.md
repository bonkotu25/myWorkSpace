# AWS 認定クラウドプラクティショナー

## AWSのセキュリティ

- AWSはクラウド本体のセキュリティ部分を担当し、ユーザーはクラウド内のセキュリティを担当する。（クラウドセキュリティ責任分担モデル）
- EC2やVPCなど、IaaSのカテゴリーに分類されるAWS製品はユーザーがすべて管理するため、必要なセキュリティ設定と管理タスクをすべて実行する必要がある。
- AWSはユーザーがクラウドにおけるセキュリティ対策を行う上で便利なツールやサービスを提供する。
- AWS セキュリティには、データ保護、コンプライアンス要件への準拠、コスト削減、迅速なスケーリングという4つの利点がある。

### IAM

#### IAMユーザーグループ

- ユニットとして管理されるIAMユーザーのコレクションです。 グループを使用すると、複数のユーザーの権限を指定できるため、ユーザー権限を管理しやすくなります

#### IAMロール

- AWSリソースに対してアクセス権限を付与する方法

### セキュリティグループ

- セキュリティグループはEC2インスタンスやDBインスタンスなどのインスタンスの通信トラフィックを制御するファイアウォール。
- セキュリティグループはHTTPやSSHなどのプロトコルを指定して通信を許可する設定を行うことができる。  
- VPC内でインスタンスを立ち上げた場合、1つのインスタンスに対して同時に最大５つまでのセキュリティグループを設定することができる。

### AWS Shield

- Ddos攻撃に対する保護サービス
- AWS Shield Standardじゃ一般的なDDos攻撃から市捨てmを保護する。
- AWS Shield AdvancedはStandardに加えてDDOS Response Teamによる緩和策を実施し、攻撃を可視化する。
- AWS Shield AdvancedではAWS WAFが無償で無制限に利用可能

### AWS WAF

- AWSが提供するマネージド型のWAF
- AWS WAFの基本料金は無料。webセキュリティルールに基づいて課金される。
- AWS WAFのセキュリティルールはユーザーが設定する必要がある。
- Web ACL の適用サービスはCloudfront、ALB、API gatewayから選択する。

### inspector

- 脆弱性診断を自動で行うことができる。
- EC2上にデプロイされたアプリケーションに対応
- 各種ルールパッケージはAWSが最新のものにアップデート
- スケジューリング設定により完全に自動でチェック可能

### AWS Artifact

- AWSのコンプライアンスレポートにオンデマンドでアクセスできる。
- Service Organization Control(SOC)、Payment Card Industry(PCI)レポートなどが取得可能

### AWS Key Management Service(KMS)

- AWS上で暗号化のためのキーを作成・管理し・暗号化の制御が行えるサービス

---

## AWSのテクノロジー

- リージョンにはアベイラビリティゾーンが2つ以上ある。
- AZは障害が同時に影響しないよう、地理的に十分に離れた場所にある。
- 同一リージョン内のAZ同士は高速なプライベート光ファイバーネットワーキングで接続されている。
- 複数のAZを使うことで耐障害性、可用性の高いアーキテクチャを実装できる。
- DCはセキュリティ、コンプライアンス上の様々な第三者監査検証を実施している。
- エッジロケーションはリージョンとは違う場所に全世界で200か所以上ある。
- エッジロケーションではAmazon Route53が利用され、これによって低レーテンシーなDNSクエリが実現される。
- エッジロケーションではAmazon CroudFrontが利用され、これによってコンテンツの低レイテンシーな配信が実現される。

## AWSのコンピューティングサービス

### ECS

- 「Amazon Elastic Container Service」の略。コンテナ管理を行う。

### Lightstail

- AWS　が提供する仮想プライベートサーバー

### Batch

- フルマネージド型のバッチ処理実行環境

### EC2

- 必要な時に必要なだけのEC2インスタンスを使用できる
- 必要なEC2インスタンスの数を予測する必要はない
- 運用を開始した後に柔軟に性能を変更できる
- 必要なEC2インスタンスの性能を性能を予測する必要がない
- 使った分にだけ時間単位/秒単位の料金が発生する。
- アウト通信に転送料金が発生する。
- 数分でEC2を世界中で起動できる。
- AMIから同じ構成のEC2インスタンスを難題でも起動できる
- EC2インスタンスへのトラフィックはセキュリティグループのインバウンドで制御する。
- オペレーティングシステムの管理者はキーペアで安全にログインし、root権限、admin権限を持つ
- ユースケースに応じて料金オプションを使い分けることでコスト効率が向上する。

#### EC2のインスタンス

1. オンデマンドインスタンス
    - 通常の購入方式
2. リザーブドインスタンス
    - 1年もしくは3年の期間契約
3. スポットインスタンス
    - オンデマンドよりも低価格で利用できる。実行時間に柔軟性がある場合や中断できる処理に利用する。
4. スケジュールドリザーブドインスタンス
    - 2021年に廃止

### ELB

- EC2インスタンスの可用性を高めるためにELBを使用することができる。
- http/httpsではALBを使い、それ以外のTCPではNLBを使用する
- ELBには正常なインスタンスのみにトラフィックを送るためのヘルスチェック機能がある。
- ELBはインターネット向けにも内部向けにも対応している。
- インターネット向けだけではなく内部にもELBを挟むことによって、システムの可用性を高めることができる。
- ELB自体が高可用性のマネージドサービスなので、単一障害点とならない
- 複数のAZに負荷分散を実行できるのでリソース負荷が均等になる。

### Auto Scaling

- Auto ScalingによってEC2インスタンスを必要な時に自動で増減できる
- Auto Scalingのメリットは高可用性、耐障害性、コスト効率化
- 垂直スケーリングよりも水平スケーリングのほうがスケーラビリティを確保しやすい
- Auto Scalingでは起動設定（何を）、AutoScalinグループ（どこで）、スケーリングポリシー（いつ）を設定する
- EC2のユーザーデータを使うことでコマンドを自動実行しデプロイ処理を自動化できる。
- EC2の情報はメタデータから取得できる。
- ELB、CloudWatch、Auto Scalingの3つのサービスで自動的でスケーラブルなアプリケーションを構築できる。

### Lambda

- サーバー構築や環境の準備をすることなくすぐに開発を始められる。
- サーバーの運用から解放され、開発に注力できる
- lambdaを使うために新しい言語の勉強は不要
- メモリを割り当てることでほかのリソースの性能も割り当てられる
- リクエストに応じて水平的にスケーリングして並行で関数が実行される。
- Auto Scalingを設定する必要がない
- 実行されている時間に対してミリ秒単位の無駄のない課金がされる
- 実行されていない待機時間には課金がない
- AWSサービスの処理を簡単に自動化できる
- AWSサービスからのトリガーを使用することで、イベントからlambdaを実行できる。

## ストレージサービス

### EFS

- EC2インスタンスからLAN上にあるNASとして利用できる共有ファイルストレージとして提供されています

### Storage Gateway

- オンプレアプリケーションとAWSのストレージをシームレスに接続。
- バックアップ、アーカイブ災害復旧、移行に使用

### Snowball

- 物理デバイスを利用して大容量のデータ転送ができる。
- エクサバイト級のデータ転送にはSnowmobileを使用する。

### AWS Snowball Edge

- AWSクラウドへの安全な大量データの転送を可能にするサービスです。
- セキュリティに考慮して設計されたデバイスを使用するペタバイト規模のデータ転送ソリューションで、AWS クラウド内外に大容量データを転送可能。

### EBS

- EBSはポイントインタイムスナップショットを作成することで、Amazon EBSボリュームのデータを Amazon S3 にバックアップして、データ消失を防ぐことができます。（増分バックアップ）
- 必要な時に必要な量を利用できる
- AZ内で自動的にレプリケートされる
- 使い始めた後で、ボリュームタイプを変更できる。
- 使い始めた後で、ストレージ容量を増加できる。
- スナップショットはS3の機能を使って保存される
- EBSの暗号化に対して、追加の操作は必要ない
- EBSのデータは永続的、インスタンスストアは一時的

### S3

- オブジェクトタイプのストレージで、大量データを保存するのに向いている。
- ユーザー側で設定しなくても、AWS側でストレージリソースをスケールアップ/ダウンして、変動する需要に対応する。
- 複数のシステムにまたがる S3 オブジェクトをすべて自動的に作成して保存しており、99.999999999% (9 x 11) のデータ耐久性を実現するように設計。
- 世界中どこからでもアクセスできる。
- URL経由でアクセスが可能

#### S3のセキュリティ

- S3バケット、オブジェクトはデフォルトでプライベート
- ACLで簡単にアクセス権を制御
- バケットポリシーで詳細にアクセス権を設定可能
- ec2などのAWSリソースにS3のアクセス権を設定する際はIAMロールを使用する。
- HTTPSでアクセスできる
- 保存データの暗号化は複数の方法から選択できる。

#### S3の料金

- ストレージ料金はストレージクラスによりコスト効率を高めることができる
- ライフサイクルポリシーによりストレージクラスの変更を自動化できる
- リージョン外へのアウト通信のみにデータ転送料金が発生する

#### S3のタイプ

- STANDARD
  - 複数個所にデータを複製するため高耐久。
  - 頻繁に利用するデータの格納に向いている  
- STANDARD -IA
  - IA：Infrequent Access （低頻度アクセス）
- ONEZONE-IA
  - 低頻度アクセスだがマルチAZ分散されていない
  - 重要ではないデータ向け。その分安い
- S3 Intelligent Tiering
  - 低頻度と高頻度の2つを持っている。ファイルは自動で低頻度に移動する。
  - 利用頻度がわからないデータ向け
- S3 Glacier Flexible Retrieval
  - 1年数回のアクセス向け
  - データ検索で3~5時間
  - 迅速取り出しで2~5分で取り出し可能
- S3 Glacier Instant Retrieval
  - アクセスがほとんどなく、ミリ秒単位で取り出しが必要でデータ向け
  - S3 standardと同じパフォーマンスのデータ取り出し。
- Amazon Glacier DEEP Archive
  - 最安のストレージ

## ネットワークサービス

### VPC

### サブネット

### インターネットゲートウェイ

### ルートテーブル

### セキュリティグループ

### ネットワークACL

### 外部からEC2インスタンスにアクセスするには

### ハイブリッド構成環境

### CloudFront

## データベースサービス

### RDS

- マルチAZで自動フェールオーバーを実現

### DynamoDB

## 管理サービス

### Cloudwatch

### Trusted Advisor

## 料金と請求

---

### Amazon S3 Transfer Acceleration

- エッジロケーションを利用してクライアントと S3 バケットの間で、長距離にわたるファイル転送を高速、簡単、安全に行える

## AWS Database Migration Service （DMS）


## AWS Application Discovery Service 

- オンプレミスデータセンターに関する情報を収集することにより、移行プロジェクト計画を支援しています。

## AWS CloudTrail

- ユーザーアクティビティログを取得することができる。
- ユーザー、ロール、または AWS のサービスによって実行されたアクションは、CloudTrail にイベントとして記録される。

## Amazon SNS

- マイクロサービス、分散型システム、およびサーバーレスアプリケーションの分離を可能にする、高可用性で耐久性に優れたセキュアな完全マネージド型 pub/sub メッセージングサービス。
- aws上でイベント通知、メッセージング処理、プッシュ通知をするときに用いる。

## Amazon SES

- デジタルマーケティング担当者やアプリケーション開発者がマーケティング、通知、トランザクションに関するEメールを送信できるように設計された、クラウドベースのEメール送信サービス

## Amazon SQS

- 完全マネージド型のメッセージキューイングサービスで、マイクロサービス、分散システム、およびサーバーレスアプリケーションの切り離しとスケーリングが可能です。プッシュ方式ではなくポーリング処理による通知を実施します。
- aws上でキューイング、タスク並列分散を使用するときに使用する。

## Amazon MQ

## インターネットゲートウェイ

- VPC のインスタンスとインターネットとの間の通信を可能にする VPC コンポーネントです。VPCに設定することにより、インターネットとのアクセスを可能にする。

### インターネットゲートウェイの目的

1. インターネットでルーティング可能なトラフィックの送信先を VPC のルートテーブルに追加する。
2. パブリック IPv4 アドレスが割り当てられているインスタンスに対してネットワークアドレス変換 (NAT) を行う。

## Amazon RDS

- リードレプリカを追加することで可用性と耐久性を向上させることが可能であり、かつパフォーマンスも改善します。
- DB インスタンスの自動バックアップはデフォルトで Amazon S3 に取得される。

## Amazon Aurora

- DB インスタンスでは常に自動バックアップが有効になっています
- 標準のMySQLの最大5倍のスループットと、標準のPostgreSQLの最大3倍のスループットを実現

## Amazon DynamoDB

- フルマネージド型の可用性の高いNoSQLサービス
- セッションデータの処理に向いており、高速で処理を実行できる。

## Amazon Redshift

- 高速でシンプルかつ費用対効果の高いデータウェアハウスサービスです。

## Amazon EMR

- オープンソースのフレームワークである Apache Spark と Hadoop を使用して、膨大な量のデータを迅速かつコスト効率よく処理して分析するサービス

## AWS Organizations

- アカウント作成を自動化して、ビジネスニーズを反映したアカウントのグループを作成し、それらのグループにポリシーを適用して管理できる。

## メモ

### 覚えておくべき移行関連のAWSサービス

1. AWS Application Discovery Service
    - サーバの使用データを提供し、移行に必要な情報を提供する。
2. AWS Database Migration Service
    - DBを短時間で安全にAWSに移行する
3. AWS Server Migration Service
    - オンプレミスワークロードを従来よりも簡単かつ短時間でAWSに移行する 
4. AWS Schema Convertion TOOL
    - ソースデータベーススキーマ、ビュー、ストアドを自動的にターゲットデータベース互換フォーマットに変換する。

### 比較

1. Amazon SNS
    - AWS上のイベント通知やプッシュ通知
2. Amazon SES
    - Eメール
3. Amazon SQS
    - キューイング処理。ポーリング・PULL型の処理、並列分散処理

### スティッキーセッション

- ELBがサーバにリクエスト振り分ける際、特定のCookieを確認することで、特定のクライアントからのリクエストを特定のサーバに紐付けることが出来る機能

### ネットワークACL

- 1 つ以上のサブネットのインバウンドトラフィックとアウトバウンドトラフィックを制御するファイアウォールとして動作する、VPC 用のセキュリティのオプションレイヤー

### ストレージ

1. ブロックストレージ
    - EC2にアタッチ
    - ブロック形式でデータを保存
    - 高速、高帯域幅
    - 例:EBS、インスタンスストア
2. オブジェクトストレージ
    - 例:S3,Glacier
    - オブジェクト形式でデータを保存
    - 安価かつ高耐久
3. ファイルストレージ
    - ファイル形式でデータを保存
    - 複数のEC2から同時にアタッチ可能
    - 例:EFS

### AWSでセキュリティを向上させる

- 多要素認証（MFA）を設定して AWS リソースを保護することが推奨

### AWSの可用性について

- WSグローバルインフラストラクチャは主にリージョンとアベイラビリティーゾーン（AZ）によって構成されています。
- マルチAZ構成はAZを２つ利用した構成です。複数のAZを使用して同じリージョン内の複数のDC間でアプリケーションとデータをレプリケートすることにより、高い稼働率を達成することができる。
- マルチリージョン展開によって、ホットスタンバイやウォームスタンバイ構成をとることで、地震などの大きな災害でリージョンが停止するなどのリスクに対処できるようになる。
- インスタンスなどにオートスケーリングを実行することで、可用性を固めることは可能ですが、９９％以上のような高い稼働率を達成するのには不十分。

### ACLとセキュリティグループ

- ACL
  - VPC、サブネット単位で適用
  - 許可と拒否をin/outで指定
- セキュリティグループ
  - サーバー単位で適用
  - 許可のみをin/outで指定

### AWSのモニタリング系サービス

- Amazon Cloud Watch
  - ほとんどのAWSに自動適用。アラームなどを設定できる。
- AWS Cloud Trail
  - ユーザーアクティビティとAPI使用状況のログを取得し監視する
- AWS System Manager
  - AWSとオンプレ環境のモニタリングを統合管理し、運用タスクを自動化する。
- AWS Config
  - AWSリソースの設定状況を評価し、AWSリソースの変更をモニタリングして履歴管理するサービス
- AWS Personal Hearth Dashboard
  - AWSサービスの異常正常ステータスをユーザーの利用状況に合わせて表示する。

### AWS SDK

### AWS プロフェッショナルサービス

- AWSでは利用者をサポートするため専門的なAWSプロフェッショナルサービスが提供されています。これはAWSクラウドを使用する際に望ましいビジネス成果を実現するのを支援できる専門家のグローバルチームです。

### Route53

- アプリケーションとWebサーバーおよびその他のリソースのヘルスとパフォーマンスを監視するヘルスチェックを提供します。

### AWS OpsWorks

- Chef や Puppet のマネージド型インスタンスを利用した構成管理サービス

### AWS Elastic Beanstalk

- AWS クラウドのアプリケーションを迅速にデプロイし管理

### AWS CloudFormation

- テンプレートにAWSリソースを利用したインフラ構成をコードとして記述することで、1 つのスタックとして一括で起動し、設定できる。

### Elasticache

- ミリ秒未満のレイテンシを必要とするリアルタイムIoTアプリケーションのデータレイヤーに使用

### コード関連のサービス

1. AWS CodeCommit
    - フルマネージド型のソース管理サービス
    - ソースコードからバイナリまでのあらゆるものを安全に保存でき、ライブラリなどのアプリケーション資産をコードとともに保存することが可能
2. AWS CodePipeline
    - パイプラインのリリースを自動化
3. AWS CodeBuild
    - クラウド内のコードをビルドおよびテストする。
4. AWS CodeDeploy
    - さまざまなコンピューティングサービスへのソフトウェアのデプロイを自動化

### Amazon Neptune

- フルマネージドグラフデータベースサービス
- データセットと連携するアプリケーションを簡単に構築および実行できる。

### AWS Security Token Service (AWS STS)

- AWS のサービスへのアクセスに使用できる一時的な限定権限認証情報を取得できる

### Amazon Cognito

- ウェブアプリケーションおよびモバイルアプリにユーザーのサインアップ/サインインおよびアクセスコントロールの機能を追加するサービス

### Amazon Elastic Container Registry (ECR)

- 完全マネージド型の Docker コンテナレジストリ

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIwMzAxMjU2MTgsNjA2NTQ3NDk5LC04Nj
MwNzkxODQsMTc5MjMyNzU0MiwtMTU2MjU5NjAzMSwtMTUwMjAz
NDU3NSwxOTUyMTMyMjA0LDgyMjUwMTU5NCwtMTY3MDIzNjc1OS
wyMTQyMzI0MDAzLC0yMzA3MjYyNjcsMjM5MjQ5MzMzLDMwNzU3
OTcxNywxNDU3MDMwMjQwLC05NTUwNjM4NzcsMjEwMDIwNDU2MC
wtMzcyMjk1ODkxLDIwMjk1MjAxODksNDY5NDg3MzAyLC01MTMx
OTA1MDldfQ==
-->